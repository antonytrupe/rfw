{"version":3,"file":"Game.js","names":["_lanceGg","require","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","prototype","arg","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","Number","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","arguments","value","apply","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","PADDING","WIDTH","HEIGHT","PADDLE_WIDTH","PADDLE_HEIGHT","Paddle","_DynamicObject","_super","gameEngine","options","_this","health","syncTo","other","assign","type","BaseTypes","TYPES","INT16","DynamicObject","Ball","_DynamicObject2","_super2","velocity","percent","Game","exports","_GameEngine","_super3","_this2","console","log","physicsEngine","SimplePhysicsEngine","on","gameLogic","serverSideInit","serverSidePlayerJoined","serverSidePlayerDisconnected","clientSideInit","clientSideDraw","registerClasses","serializer","registerClass","paddles","world","queryObjects","instanceType","ball","queryObject","position","x","y","processInput","inputData","playerId","playerPaddle","addObjectToWorld","playerID","TwoVector","ev","controls","KeyboardControls","renderer","clientEngine","bindKey","repeat","updateEl","el","obj","style","top","left","background","concat","toString","document","querySelector","GameEngine"],"sources":["../../src/common/Game.js"],"sourcesContent":["import { GameEngine, BaseTypes, TwoVector, DynamicObject, KeyboardControls, SimplePhysicsEngine } from 'lance-gg';\r\n\r\nconst PADDING = 20;\r\nconst WIDTH = 400;\r\nconst HEIGHT = 400;\r\nconst PADDLE_WIDTH = 10;\r\nconst PADDLE_HEIGHT = 50;\r\n\r\n// A paddle has a health attribute\r\nclass Paddle extends DynamicObject {\r\n\r\n    constructor(gameEngine, options, props) {\r\n        super(gameEngine, options, props);\r\n        this.health = 0;\r\n    }\r\n\r\n    static get netScheme() {\r\n        return Object.assign({\r\n            health: { type: BaseTypes.TYPES.INT16 }\r\n        }, super.netScheme);\r\n    }\r\n\r\n    syncTo(other) {\r\n        super.syncTo(other);\r\n        this.health = other.health;\r\n    }\r\n}\r\n\r\n// a game object to represent the ball\r\nclass Ball extends DynamicObject {\r\n\r\n    constructor(gameEngine, options, props) {\r\n        super(gameEngine, options, props);\r\n    }\r\n\r\n    // avoid gradual synchronization of velocity\r\n    get bending() {\r\n        return { velocity: { percent: 0.0 } };\r\n    }\r\n\r\n    syncTo(other) {\r\n        super.syncTo(other);\r\n    }\r\n}\r\n\r\nexport default class Game extends GameEngine {\r\n\r\n    constructor(options) {\r\n        console.log('Game constructorrrr')\r\n        super(options);\r\n        this.physicsEngine = new SimplePhysicsEngine({ gameEngine: this });\r\n\r\n        // common code\r\n        this.on('postStep', this.gameLogic.bind(this));\r\n\r\n        // server-only code\r\n        this.on('server__init', this.serverSideInit.bind(this));\r\n        this.on('server__playerJoined', this.serverSidePlayerJoined.bind(this));\r\n        this.on('server__playerDisconnected', this.serverSidePlayerDisconnected.bind(this));\r\n\r\n        // client-only code\r\n        this.on('client__rendererReady', this.clientSideInit.bind(this));\r\n        this.on('client__draw', this.clientSideDraw.bind(this));\r\n    }\r\n\r\n    registerClasses(serializer) {\r\n        serializer.registerClass(Paddle);\r\n        serializer.registerClass(Ball);\r\n    }\r\n\r\n    gameLogic() {\r\n        let paddles = this.world.queryObjects({ instanceType: Paddle });\r\n        let ball = this.world.queryObject({ instanceType: Ball });\r\n        if (!ball || paddles.length !== 2) return;\r\n\r\n        // CHECK LEFT EDGE:\r\n        if (ball.position.x <= PADDING + PADDLE_WIDTH &&\r\n            ball.position.y >= paddles[0].y && ball.position.y <= paddles[0].position.y + PADDLE_HEIGHT &&\r\n            ball.velocity.x < 0) {\r\n\r\n            // ball moving left hit player 1 paddle\r\n            ball.velocity.x *= -1;\r\n            ball.position.x = PADDING + PADDLE_WIDTH + 1;\r\n        } else if (ball.position.x <= 0) {\r\n\r\n            // ball hit left wall\r\n            ball.velocity.x *= -1;\r\n            ball.position.x = 0;\r\n            console.log(`player 2 scored`);\r\n            paddles[0].health--;\r\n        }\r\n\r\n        // CHECK RIGHT EDGE:\r\n        if (ball.position.x >= WIDTH - PADDING - PADDLE_WIDTH &&\r\n            ball.position.y >= paddles[1].position.y && ball.position.y <= paddles[1].position.y + PADDLE_HEIGHT &&\r\n            ball.velocity.x > 0) {\r\n\r\n            // ball moving right hits player 2 paddle\r\n            ball.velocity.x *= -1;\r\n            ball.position.x = WIDTH - PADDING - PADDLE_WIDTH - 1;\r\n        } else if (ball.position.x >= WIDTH ) {\r\n\r\n            // ball hit right wall\r\n            ball.velocity.x *= -1;\r\n            ball.position.x = WIDTH - 1;\r\n            console.log(`player 1 scored`);\r\n            paddles[1].health--;\r\n        }\r\n\r\n        // ball hits top or bottom edge\r\n        if (ball.position.y <= 0) {\r\n            ball.position.y = 1;\r\n            ball.velocity.y *= -1;\r\n        } else if (ball.position.y >= HEIGHT) {\r\n            ball.position.y = HEIGHT - 1;\r\n            ball.velocity.y *= -1;\r\n        }\r\n    }\r\n\r\n    processInput(inputData, playerId) {\r\n        super.processInput(inputData, playerId);\r\n\r\n        // get the player paddle tied to the player socket\r\n        let playerPaddle = this.world.queryObject({ playerId });\r\n        if (playerPaddle) {\r\n            if (inputData.input === 'up') {\r\n                playerPaddle.position.y -= 5;\r\n            } else if (inputData.input === 'down') {\r\n                playerPaddle.position.y += 5;\r\n            }\r\n        }\r\n    }\r\n\r\n    //\r\n    // SERVER ONLY CODE\r\n    //\r\n    serverSideInit() {\r\n        // create the paddles and the ball\r\n        this.addObjectToWorld(new Paddle(this, null, { playerID: 0, position: new TwoVector(PADDING, 0) }));\r\n        this.addObjectToWorld(new Paddle(this, null, { playerID: 0, position: new TwoVector(WIDTH - PADDING, 0) }));\r\n        this.addObjectToWorld(new Ball(this, null, {\r\n            position: new TwoVector(WIDTH /2, HEIGHT / 2),\r\n            velocity: new TwoVector(2, 2)\r\n        }));\r\n    }\r\n\r\n    // attach newly connected player to next available paddle\r\n    serverSidePlayerJoined(ev) {\r\n        console.log('player connected')\r\n        let paddles = this.world.queryObjects({ instanceType: Paddle });\r\n        if (paddles[0].playerId === 0) {\r\n            paddles[0].playerId = ev.playerId;\r\n        } else if (paddles[1].playerId === 0) {\r\n            paddles[1].playerId = ev.playerId;\r\n        }\r\n    }\r\n\r\n    serverSidePlayerDisconnected(ev) {\r\n        let paddles = this.world.queryObjects({ instanceType: Paddle });\r\n        if (paddles[0].playerId === ev.playerId) {\r\n            paddles[0].playerId = 0;\r\n        } else if (paddles[1].playerId === ev.playerId) {\r\n            paddles[1].playerId = 0;\r\n        }\r\n    }\r\n\r\n    //\r\n    // CLIENT ONLY CODE\r\n    //\r\n    clientSideInit() {\r\n        this.controls = new KeyboardControls(this.renderer.clientEngine);\r\n        this.controls.bindKey('up', 'up', { repeat: true } );\r\n        this.controls.bindKey('down', 'down', { repeat: true } );\r\n    }\r\n\r\n    clientSideDraw() {\r\n\r\n        function updateEl(el, obj) {\r\n            let health = obj.health>0?obj.health:15;\r\n            el.style.top = obj.position.y + 10 + 'px';\r\n            el.style.left = obj.position.x + 'px';\r\n            el.style.background = `#ff${health.toString(16)}f${health.toString(16)}f`;\r\n        }\r\n\r\n        let paddles = this.world.queryObjects({ instanceType: Paddle });\r\n        let ball = this.world.queryObject({ instanceType: Ball });\r\n        if (!ball || paddles.length !== 2) return;\r\n        updateEl(document.querySelector('.ball'), ball);\r\n        updateEl(document.querySelector('.paddle1'), paddles[0]);\r\n        updateEl(document.querySelector('.paddle2'), paddles[1]);\r\n    }\r\n}\r\n"],"mappings":"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"}